extends layout.pug

block content
    .error-container(class=`error-${status || 500}`)
        .error-card
            .error-icon
                i.fas.fa-exclamation-triangle
            h1.error-title #{status || 500} - Fehler aufgetreten

            .error-content
                if error
                    .error-message
                        h3 
                            i.fas.fa-exclamation-circle
                            | Fehlermeldung:
                        pre.error-code #{error}

                .error-details
                    h3 
                        i.fas.fa-info-circle
                        | Technische Details:
                    ul.error-list
                        li
                            strong Zeitpunkt:
                            span #{new Date().toLocaleString('de-DE')}
                        if url
                            li
                                strong URL:
                                span #{url}
                        if method
                            li
                                strong Methode:
                                span #{method}
                        if userAgent
                            li
                                strong Browser:
                                span #{userAgent}
                        if ip
                            li
                                strong IP-Adresse:
                                span #{ip}

                .error-actions
                    a.btn.btn-primary(href="/")
                        i.fas.fa-home
                        | Zurück zum Dashboard
                    button.btn.btn-secondary(onclick="window.history.back()")
                        i.fas.fa-arrow-left
                        | Zurück
                    button.btn.btn-info(onclick="reloadPage()")
                        i.fas.fa-sync
                        | Seite neu laden

                .error-help
                    h4
                        i.fas.fa-life-ring
                        | Hilfe & Support:
                    p
                        | Wenn dieser Fehler weiterhin auftritt, kontaktieren Sie bitte den Support.
                    .help-contacts
                        a.btn.btn-primary(href="mailto:support@techniker-dashboard.com")
                            i.fas.fa-envelope
                            | E-Mail Support
                        a.btn.btn-secondary(href="/help")
                            i.fas.fa-question-circle
                            | Hilfe-Center
                        a.btn.btn-info(href="/documentation")
                            i.fas.fa-book
                            | Dokumentation

block scripts
    script.
        // Error details object
        const errorDetails = {
            error: "#{error || ''}",
            url: "#{url || ''}",
            method: "#{method || ''}",
            status: "#{status || 500}",
            timestamp: "#{new Date().toLocaleString('de-DE')}",
            userAgent: navigator.userAgent,
            platform: navigator.platform,
            language: navigator.language,
            online: navigator.onLine
        };

        // Reload page
        function reloadPage() {
            window.location.reload();
        }

        // Show notification (if notification system exists)
        function showNotification(message, type) {
            if (window.dashboard && window.dashboard.showNotification) {
                window.dashboard.showNotification(message, type);
            } else {
                console.log(`${type.toUpperCase()}: ${message}`);
            }
        }