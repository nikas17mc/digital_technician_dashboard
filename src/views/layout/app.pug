//- src/views/layout/app.pug
//- Zentrales Application-Layout

extends base.pug

//- Globale Partials
include ../partials/sidebar.pug
include ../partials/topbar.pug
include ../partials/notifications.pug
include ../partials/footer.pug

//- =====================================================
//- BODY / APP WRAPPER
//- =====================================================
block body
    body.app-layout(data-layout="app")

        //- Notifications (global, overlayfähig)
        block notifications
            +notifications()

        //- Hauptcontainer
        .app-container

            //- Sidebar (Navigation / Rollenabhängig)
            aside.app-sidebar
                +sidebar({
                    activePath: currentPath,
                    role: user
                })

            //- Content-Bereich
            .app-main

                //- Topbar (User, Breadcrumbs, Actions)
                header.app-topbar(role="banner")
                    +topbar({
                        title: "Geräteübersicht",
                        showBreadcrumbs: true,
                        breadcrumbs: [
                            { label: "Dashboard", href: "/dashboard" },
                            { label: "Activity", href: "/activity" },
                            { label: "Geräte" , href: "/devices" }
                        ]
                    })

                //- Seiteninhalt
                main.app-content
                    block content
                        //- Default Fallback
                        p App-Content nicht definiert.

                //- Footer
                footer.app-footer
                    +footer({showVersion: true, showEnv: true, showLinks: true})

        //- Modals (global gesammelt, damit z-index nicht eskaliert)
        block modals

        //- Page-spezifische Scripts
        block pageScript

        //- App-weite Scripts
        block appScripts
            script(src="/script/app.js", defer)
